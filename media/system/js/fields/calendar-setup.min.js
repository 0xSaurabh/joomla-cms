Calendar.setup=function(a){function b(b,c){"undefined"==typeof a[b]&&(a[b]=c)}function c(a){var b=a.params,c=a.dateClicked||b.electric;c&&b.inputField&&(b.inputField.value=a.date.print(b.ifFormat),"function"==typeof b.inputField.onchange&&b.inputField.onchange()),c&&b.displayArea&&(b.displayArea.innerHTML=a.date.print(b.daFormat)),c&&"function"==typeof b.onUpdate&&b.onUpdate(a),c&&b.flat&&"function"==typeof b.flatCallback&&b.flatCallback(a),c&&b.singleClick&&a.dateClicked&&a.callCloseHandler()}b("inputField",null),b("displayArea",null),b("button",null),b("eventName","click"),b("ifFormat","%Y/%m/%d"),b("daFormat","%Y/%m/%d"),b("singleClick",!0),b("disableFunc",null),b("dateStatusFunc",a.disableFunc),b("dateTooltipFunc",null),b("dateText",null),b("firstDay",null),b("align","Br"),b("range",[1900,2999]),b("weekNumbers",!0),b("flat",null),b("flatCallback",null),b("onSelect",null),b("onClose",null),b("onUpdate",null),b("date",null),b("showsTime",!1),b("timeFormat","24"),b("electric",!0),b("step",2),b("position",null),b("cache",!1),b("showOthers",!1),b("multiple",null);var d=["inputField","displayArea","button"];for(var e in d)"string"==typeof a[d[e]]&&(a[d[e]]=document.getElementById(a[d[e]]));if(!(a.flat||a.multiple||a.inputField||a.displayArea||a.button))return alert("Calendar.setup:\n  Nothing to setup (no fields found).  Please check your code"),!1;if(null!=a.flat){if("string"==typeof a.flat&&(a.flat=document.getElementById(a.flat)),!a.flat)return alert("Calendar.setup:\n  Flat specified but can't find parent."),!1;var f=new Calendar(a.firstDay,a.date,a.onSelect||c);return f.setDateToolTipHandler(a.dateTooltipFunc),f.showsOtherMonths=a.showOthers,f.showsTime=a.showsTime,f.time24="24"==a.timeFormat,f.params=a,f.weekNumbers=a.weekNumbers,f.setRange(a.range[0],a.range[1]),f.setDateStatusHandler(a.dateStatusFunc),f.getDateText=a.dateText,a.ifFormat&&f.setDateFormat(a.ifFormat),a.inputField&&"string"==typeof a.inputField.value&&f.parseDate(a.inputField.value),f.create(a.flat),f.show(),!1}var g=a.button||a.displayArea||a.inputField;return g["on"+a.eventName]=function(){var b=a.inputField||a.displayArea,d=a.inputField?a.ifFormat:a.daFormat,e=!1,f=window.calendar;if(b&&(a.date=Date.parseDate(b.value||b.innerHTML,d)),f&&a.cache?(a.date&&f.setDate(a.date),f.hide()):(window.calendar=f=new Calendar(a.firstDay,a.date,a.onSelect||c,a.onClose||function(a){a.hide()}),f.setDateToolTipHandler(a.dateTooltipFunc),f.showsTime=a.showsTime,f.time24="24"==a.timeFormat,f.weekNumbers=a.weekNumbers,e=!0),a.multiple){f.multiple={};for(var g=a.multiple.length;--g>=0;){var h=a.multiple[g],i=h.print("%Y%m%d");f.multiple[i]=h}}return f.showsOtherMonths=a.showOthers,f.yearStep=a.step,f.setRange(a.range[0],a.range[1]),f.params=a,f.setDateStatusHandler(a.dateStatusFunc),f.getDateText=a.dateText,f.setDateFormat(d),e&&f.create(),f.refresh(),a.position?f.showAt(a.position[0],a.position[1]):f.showAtElement(a.button||a.displayArea||a.inputField,a.align),!1},f};