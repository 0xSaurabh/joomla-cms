"use strict";function serialize(a){if(a&&"FORM"===a.nodeName){var b,c,d=[];for(b=a.elements.length-1;b>=0;b-=1)if(""!==a.elements[b].name)switch(a.elements[b].nodeName){case"INPUT":switch(a.elements[b].type){case"text":case"hidden":case"password":case"button":case"reset":case"submit":d.push(a.elements[b].name+"="+encodeURIComponent(a.elements[b].value));break;case"checkbox":case"radio":a.elements[b].checked&&d.push(a.elements[b].name+"="+encodeURIComponent(a.elements[b].value));break;case"file":}break;case"TEXTAREA":d.push(a.elements[b].name+"="+encodeURIComponent(a.elements[b].value));break;case"SELECT":switch(a.elements[b].type){case"select-one":d.push(a.elements[b].name+"="+encodeURIComponent(a.elements[b].value));break;case"select-multiple":for(c=a.elements[b].options.length-1;c>=0;c-=1)a.elements[b].options[c].selected&&d.push(a.elements[b].name+"="+encodeURIComponent(a.elements[b].options[c].value))}break;case"BUTTON":switch(a.elements[b].type){case"reset":case"submit":case"button":d.push(a.elements[b].name+"="+encodeURIComponent(a.elements[b].value))}}return d.join("&")}}document.addEventListener("DOMContentLoaded",function(){if(Joomla.getOptions("draggable-list")){var a=Joomla.getOptions("draggable-list");console.log(a.direction),document.addEventListener("touchstart",function(){},!1),document.querySelector(a.id).classList.contains("js-draggable")||document.querySelector(a.id).classList.add("js-draggable");var b=document.querySelector(".js-draggable");if(b){var c=a.url,d=a.formId,e=dragula([b],{direction:"vertical",copy:!1,copySortSource:!1,revertOnSpill:!0,removeOnSpill:!1}),f=function(a,b){var c=a.querySelectorAll('input[name="order[]"]');if("desc"===b){var c=Array.prototype.slice.call(c);c.reverse()}for(var d=0,e=c.length;e>d;d++)c[d].value=d},g=function(a){var b,c,d,e=a.querySelectorAll('[name="cid[]"]');for(b=0,c=e.length;c>b;b++)d=e[b].cloneNode(),d.setAttribute("checked","checked"),d.setAttribute("shadow","shadow"),d.setAttribute("id",""),a.append(d)},h=function(a){var b,c,d=a.querySelectorAll('[shadow="shadow"]');for(b=0,c=d.length;c>b;b++)d[b].parentNode.removeChild(d[b])};e.on("drop",function(e){if(console.log(e),f(b,a.direction),c){var i=document.querySelector("#"+d),j=document.querySelector('[name="task"]');g(i),j&&j.setAttribute("name","some__Temporary__Name__");var k={url:c,method:"POST",data:serialize(i),perform:!0};Joomla.request(k),j&&j.setAttribute("name","task"),h(i)}})}}});