"use strict";document.addEventListener("DOMContentLoaded",function(){var a,b,c,d=document.querySelector(".js-draggable");if(d)a=d.getAttribute("data-url"),b=d.getAttribute("data-direction"),c=d.getAttribute("data-nested");else if(Joomla.getOptions("draggable-list")){var e=Joomla.getOptions("draggable-list");d=document.querySelector(e.id),d.classList.contains("js-draggable")||d.classList.add("js-draggable"),a=e.url,b=e.direction,c=e.nested}if(d){document.addEventListener("touchstart",function(){},!1);var f=dragula([d],{direction:"vertical",copy:!1,copySortSource:!1,revertOnSpill:!0,removeOnSpill:!1}),g=function(a,b){var c,d,e=[],f=a.querySelectorAll('[name="order[]"]'),g=a.querySelectorAll('[name="cid[]"]');for("desc"===b&&(f=Array.prototype.slice.call(f),g=Array.prototype.slice.call(g),f.reverse(),g.reverse()),c=0,d=f.length;d>c;c++)f[c].value=c,e.push("order[]="+encodeURIComponent(c));for(c=0,d=g.length;d>c;c++)e.push("cid[]="+encodeURIComponent(g[c].value));return e};f.on("drag",function(a,b){if(c)for(var d=b.getElementsByTagName("tr"),e=0,f=d.length;f>e;e++)parseInt(a.getAttribute("data-dragable-group"))!==parseInt(d[e].getAttribute("data-dragable-group"))&&(d[e].style.display="none",d[e].querySelector('[name="cid[]"]').setAttribute("name","input_TEMP_rename__"),d[e].querySelector('[name="order[]"]').setAttribute("name","order_TEMP_rename__"))}),f.on("drop",function(){if(a){var c=document.querySelector('[name="task"]');c&&c.setAttribute("name","some__Temporary__Name__");var e={url:a,method:"POST",data:g(d,b).join("&"),perform:!0};Joomla.request(e),c&&c.setAttribute("name","task")}}),f.on("dragend",function(a){if(c)for(var b=d.querySelectorAll("tr"),e=0,f=b.length;f>e;e++)"none"===b[e].style.display&&(b[e].style.display="",b[e].querySelector('[name="input_TEMP_rename__"]').setAttribute("name","cid[]"),b[e].querySelector('[name="order_TEMP_rename__"]').setAttribute("name","order[]"))})}});