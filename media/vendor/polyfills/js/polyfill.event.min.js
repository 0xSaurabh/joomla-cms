(function(a){"Window"in this||!function(a){a.constructor?a.Window=a.constructor:(a.Window=a.constructor=new Function("return function Window() {}")()).prototype=this}(this),"Document"in this||(this.HTMLDocument?this.Document=this.HTMLDocument:(this.Document=this.HTMLDocument=document.constructor=new Function("return function Document() {}")(),this.Document.prototype=document)),"Element"in this&&"HTMLElement"in this||!function(){function a(){return k--||clearTimeout(b),!(!document.body||document.body.prototype||!/(complete|interactive)/.test(document.readyState))&&(h(document,!0),b&&document.body.prototype&&clearTimeout(b),!!document.body.prototype)}if(window.Element&&!window.HTMLElement)return void(window.HTMLElement=window.Element);window.Element=window.HTMLElement=new Function("return function Element() {}")();var b,c=document.appendChild(document.createElement("body")),d=c.appendChild(document.createElement("iframe")),e=d.contentWindow.document,f=Element.prototype=e.appendChild(e.createElement("*")),g={},h=function(a,b){var c,d,e,f=a.childNodes||[],i=-1;if(1===a.nodeType&&a.constructor!==Element){a.constructor=Element;for(c in g)d=g[c],a[c]=d}for(;e=b&&f[++i];)h(e,b);return a},i=document.getElementsByTagName("*"),j=document.createElement,k=100;f.attachEvent("onpropertychange",function(a){for(var b,c=a.propertyName,d=!g.hasOwnProperty(c),e=f[c],h=g[c],j=-1;b=i[++j];)1===b.nodeType&&(d||b[c]===h)&&(b[c]=e);g[c]=e}),f.constructor=Element,f.hasAttribute||(f.hasAttribute=function(a){return null!==this.getAttribute(a)}),a(!0)||(document.onreadystatechange=a,b=setInterval(a,25)),document.createElement=function(a){var b=j(String(a).toLowerCase());return h(b)},document.removeChild(c)}(),"defineProperty"in Object&&function(){try{var a={};return Object.defineProperty(a,"test",{value:42}),!0}catch(a){return!1}}()||!function(a){var b=Object.prototype.hasOwnProperty("__defineGetter__"),c="Getters & setters cannot be defined on this javascript engine",d="A property cannot both have accessors and be writable or have a value";Object.defineProperty=function(e,f,g){if(a&&(e===window||e===document||e===Element.prototype||e instanceof Element))return a(e,f,g);if(null===e||!(e instanceof Object||"object"==typeof e))throw new TypeError("Object must be an object (Object.defineProperty polyfill)");if(!(g instanceof Object))throw new TypeError("Descriptor must be an object (Object.defineProperty polyfill)");var h=String(f),i="value"in g||"writable"in g,j="get"in g&&typeof g.get,k="set"in g&&typeof g.set;if(j){if("function"!==j)throw new TypeError("Getter expected a function (Object.defineProperty polyfill)");if(!b)throw new TypeError(c);if(i)throw new TypeError(d);e.__defineGetter__(h,g.get)}else e[h]=g.value;if(k){if("function"!==k)throw new TypeError("Setter expected a function (Object.defineProperty polyfill)");if(!b)throw new TypeError(c);if(i)throw new TypeError(d);e.__defineSetter__(h,g.set)}return"value"in g&&(e[h]=g.value),e}}(Object.defineProperty),function(a){if(!("Event"in a))return!1;if("function"==typeof a.Event)return!0;try{return new Event("click"),!0}catch(a){return!1}}(this)||!function(){function b(a,b){for(var c=-1,d=a.length;++c<d;)if(c in a&&a[c]===b)return c;return-1}var c={click:1,dblclick:1,keyup:1,keypress:1,keydown:1,mousedown:1,mouseup:1,mousemove:1,mouseover:1,mouseenter:1,mouseleave:1,mouseout:1,storage:1,storagecommit:1,textinput:1},d=window.Event&&window.Event.prototype||null;window.Event=Window.prototype.Event=function(b,c){if(!b)throw new Error("Not enough arguments");if("createEvent"in document){var d=document.createEvent("Event"),e=!(!c||c.bubbles===a)&&c.bubbles,f=!(!c||c.cancelable===a)&&c.cancelable;return d.initEvent(b,e,f),d}var d=document.createEventObject();return d.type=b,d.bubbles=!(!c||c.bubbles===a)&&c.bubbles,d.cancelable=!(!c||c.cancelable===a)&&c.cancelable,d},d&&Object.defineProperty(window.Event,"prototype",{configurable:!1,enumerable:!1,writable:!0,value:d}),"createEvent"in document||(window.addEventListener=Window.prototype.addEventListener=Document.prototype.addEventListener=Element.prototype.addEventListener=function(){var a=this,d=arguments[0],e=arguments[1];if(a===window&&d in c)throw new Error("In IE8 the event: "+d+" is not available on the window object. Please see https://github.com/Financial-Times/polyfill-service/issues/317 for more information.");a._events||(a._events={}),a._events[d]||(a._events[d]=function(c){var d,e=a._events[c.type].list,f=e.slice(),g=-1,h=f.length;for(c.preventDefault=function(){c.cancelable!==!1&&(c.returnValue=!1)},c.stopPropagation=function(){c.cancelBubble=!0},c.stopImmediatePropagation=function(){c.cancelBubble=!0,c.cancelImmediate=!0},c.currentTarget=a,c.relatedTarget=c.fromElement||null,c.target=c.target||c.srcElement||a,c.timeStamp=(new Date).getTime(),c.clientX&&(c.pageX=c.clientX+document.documentElement.scrollLeft,c.pageY=c.clientY+document.documentElement.scrollTop);++g<h&&!c.cancelImmediate;)g in f&&(d=f[g],b(e,d)!==-1&&"function"==typeof d&&d.call(a,c))},a._events[d].list=[],a.attachEvent&&a.attachEvent("on"+d,a._events[d])),a._events[d].list.push(e)},window.removeEventListener=Window.prototype.removeEventListener=Document.prototype.removeEventListener=Element.prototype.removeEventListener=function(){var a,c=this,d=arguments[0],e=arguments[1];c._events&&c._events[d]&&c._events[d].list&&(a=b(c._events[d].list,e),a!==-1&&(c._events[d].list.splice(a,1),c._events[d].list.length||(c.detachEvent&&c.detachEvent("on"+d,c._events[d]),delete c._events[d])))},window.dispatchEvent=Window.prototype.dispatchEvent=Document.prototype.dispatchEvent=Element.prototype.dispatchEvent=function(a){if(!arguments.length)throw new Error("Not enough arguments");if(!a||"string"!=typeof a.type)throw new Error("DOM Events Exception 0");var b=this,c=a.type;try{if(!a.bubbles){a.cancelBubble=!0;var d=function(a){a.cancelBubble=!0,(b||window).detachEvent("on"+c,d)};this.attachEvent("on"+c,d)}this.fireEvent("on"+c,a)}catch(d){a.target=b;do a.currentTarget=b,"_events"in b&&"function"==typeof b._events[c]&&b._events[c].call(b,a),"function"==typeof b["on"+c]&&b["on"+c].call(b,a),b=9===b.nodeType?b.parentWindow:b.parentNode;while(b&&!a.cancelBubble)}return!0},document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&document.dispatchEvent(new Event("DOMContentLoaded",{bubbles:!0}))}))}()}).call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{});